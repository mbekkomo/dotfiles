#!/usr/bin/env fish

set sessions
while read -l line
    echo $line | read -d ' ' session
    set -a sessions $session
end

set session (begin
    printf '%s\n' $sessions
    echo "-New session-"
end | gum choose --height 5 --header "Sessions")

if test $session = "-New session-"
    contains sessions $session && zellij attach
    set session_name (basename $PWD | sd "[^a-zA-Z0-9]" "-")
    zellij attach -e
end
